
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<link rel="stylesheet" href="css/mobile-new.css">
<link rel="stylesheet" href="css/mobile.css" />
<script src="js/jquery.js"></script>
<title>ef</title>
</head>

<body>
    <form id="form1" name="form1" method="post" onsubmit="return checkform2()">
        <div class="info_area">
            <ul class="nav-menus clearfix">
                <li class="active">
                    <a href="index.html" class="city"></a>
                </li>
                <li>
                    <a href="message.html" class="message"></a>
                </li>
                <li>
                    <a href="intro.html" class="intro"></a>
                </li>
            </ul>
            <p>&nbsp;</p>
          <h2>请输入提问人信息</h2>
            <label>姓名:</label>
            <input type="text" name="email1" maxlength="50" id="email1" />
            <label>收信地址:</label>
            <input type="text" name="ename1" id="ename1" maxlength="50" />
            <label>大学:</label>
            <input type="text" name="ename1" id="ename1" maxlength="50" />
            <label>常用EMAIL:</label>
            <input type="text" name="ename1" id="ename1" maxlength="50" />
            <label>手机号:</label>
            <input type="text" name="emoblie1" id="emoblie1" maxlength="11" />
            <label>验证码:</label>
            <input type="text" name="emoblie1" id="emoblie1" maxlength="11" />
            <label>问题内容:</label>
            <textarea name="" id="" cols="30" rows="10" placeholder="请输入您的问题"></textarea>
        </div>
        <div class="send_mail" onclick="$('#form1').submit()">提交</div>
        <input type="hidden" value="moblie" id="page" name="page" />
        <input type="hidden" value="auckland" id="a1" name="a1" />
        <input type="hidden" value="abc" id="tabletitle" name="tabletitle" />
        <input type="hidden" value="我想和你一起去auckland游学！期望EF英孚可以送我俩一起去！" id="tableshow" name="tableshow" />
        <input type="hidden" value="def" id="tablefrom" name="tablefrom" />
        </form>
</body>
</html>
<script>
//判断2
function checkform2()
{
    if($("#email1").val()==""){
        alert('请填写发件人邮箱');
        $("#email1").focus();
        return false;
    }else if(!checkemail($("#email1").val())){
        alert('邮件地址有误,请重新填写');  
        $("#email1").focus();
        return false;
    }
    
    if($("#ename1").val()==""){
        alert('请填写发件人名称');
        $("#ename1").focus();
        return false;
    }
    
    if($("#emoblie1").val()==""){
        alert('请填写发件人手机号');
        $("#emoblie1").focus();
        return false;
    }else if(!checkMobile($("#emoblie1").val())){
        alert('手机号有误,请重新填写');
        $("#emoblie1").focus();
        return false;   
    }
    
    if($("#email2").val()==""){
        alert('请填写收件人邮箱');
        $("#email2").focus();
        return false;
    }else if(!checkemail($("#email2").val())){
        alert('邮件地址有误,请重新填写');  
        $("#email2").focus();
        return false;
    }
    
    if($("#ename2").val()==""){
        alert('请填写收件人名称');
        $("#ename2").focus();
        return false;
    }
    
    if($("#emoblie2").val()==""){
        alert('请填写收件人手机号');
        $("#emoblie2").focus();
        return false;
    }else if(!checkMobile($("#emoblie2").val())){
        alert('手机号有误,请重新填写');
        $("#emoblie2").focus();
        return false;   
    }
    
    $("#toids").html($("#ename1").val());
    $("#formids").html($("#ename2").val());
    
    $.ajax({
        type: "POST",
        url: "yii.php?r=site/postajax",
        data: $("#form1").serialize(),
        success: function(msg){
            window.location.href='step3.php?a='+$("#ename1").val()+'&b='+$("#ename2").val()
        }
    });
    
    return false;
} 

function checkMobile(str){
    if(!(/^1[3|5|8][0-9]\d{4,8}$/.test(str))){
        return false;
    }
    return true;
}

function checkemail(email){            // 功能函数
    var myreg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
    if(email!=""){
        if(!myreg.test(email)){
            return false;
        }
    }
    return true;
}
</script>